<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="icon" type="image/png" href="/images/favicon.png">

<title>Rails+Rollup+Dynamic Import | KT</title>

<meta name="description" content="Write an awesome description for your new site here. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />

<link rel="stylesheet" href="/karn.work/_bridgetown/static/index.KTVN5CND.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" />
<script type="module">
  import 'https://cdn.jsdelivr.net/gh/mcstudios/glightbox/dist/js/glightbox.min.js';
</script>
<script src="/karn.work/_bridgetown/static/index.OWF3DFHJ.js" defer></script>


  </head>
  <body class="post ">
    <nav>
  <ul>
    <li><a href="/karn.work/">Home</a></li>
    
    
  </ul>
</nav>

    <main>
      <main data-controller="lightbox">
  <h1>Rails+Rollup+Dynamic Import</h1>

  <p>‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏á‡πà‡∏≤‡∏¢‡∏™‡∏±‡∏Å‡∏ó‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ñ‡∏≠‡∏î <strong>Webpack</strong> ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡πá‡∏Ñ ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÉ‡∏ä‡πâ <strong>Magic Comment</strong> ‡∏ã‡∏∂‡πà‡∏á‡∏°‡∏µ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÉ‡∏ô <strong>Webpack</strong> ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ dynamic import ‡∏≠‡∏µ‡∏Å‡∏ó‡∏±‡πâ‡∏á code splitting ‡πÉ‡∏ô <code class="highlighter-rouge">esbuild</code> ‡∏Å‡πá‡∏¢‡∏±‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô WIP ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏ô‡∏≥ <code class="highlighter-rouge">esbuild</code> ‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á‡∏Å‡πá‡∏Ñ‡∏á‡∏≠‡∏µ‡∏Å‡∏™‡∏±‡∏Å‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡∏ô‡∏∂‡πà‡∏á<!--more--></p>

<p>‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ñ‡∏≠‡∏î <code class="highlighter-rouge">Webpack</code> ‡∏≠‡∏≠‡∏Å‡∏Å‡πá‡∏Ñ‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏±‡∏ô‡πÑ‡∏õ‡∏û‡∏∂‡πà‡∏á <code class="highlighter-rouge">Rollup</code> ‡∏Å‡πà‡∏≠‡∏ô ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÇ‡∏î‡∏¢‡∏ï‡∏±‡∏ß <code class="highlighter-rouge">Rollup</code> ‡πÄ‡∏≠‡∏á‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡∏≠‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô chunk ‡πÑ‡∏î‡πâ ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡πÅ‡∏ï‡πà‡∏≠‡∏±‡∏•‡∏Å‡∏≠‡∏£‡∏¥‡∏ó‡∏∂‡∏°‡∏ó‡∏µ‡πà <code class="highlighter-rouge">Rollup</code> ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå chunk ‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö <code class="highlighter-rouge">[name]-[hash].js</code> ‡∏ã‡∏∂‡πà‡∏á hash ‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏´‡∏±‡∏™ SHA256 ‡πÅ‡∏ï‡πà‡∏à‡∏∞‡∏ï‡∏±‡∏î‡πÄ‡∏≠‡∏≤‡πÄ‡∏â‡∏û‡∏≤‡∏∞ 8 ‡∏ï‡∏±‡∏ß‡πÅ‡∏£‡∏Å‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡∏ã‡∏∂‡πà‡∏á‡∏ñ‡πâ‡∏≤‡∏ô‡∏≥‡πÑ‡∏õ‡∏á‡∏≤‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö <code class="highlighter-rouge">Sprockets</code> ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏à‡∏∞‡∏ô‡∏≥‡πÑ‡∏õ‡πÇ‡∏õ‡∏£‡∏î‡∏±‡∏Å‡∏ä‡∏±‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏∞‡πÄ‡∏Å‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà <code class="highlighter-rouge">Sprockets</code> ‡∏à‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ fingerprint ‡πÅ‡∏•‡∏∞‡πÉ‡∏™‡πà <code class="highlighter-rouge">hash</code> ‡∏ï‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏≠‡∏µ‡∏Å‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</p>

<p>‡∏¢‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡πÉ‡∏ô <code class="highlighter-rouge">application.js</code> ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ dynamic import ‡πÑ‡∏ü‡∏•‡πå <code class="highlighter-rouge">awesome.js</code> ‡∏î‡∏±‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// application.js</span>
<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">showAwesomeThing</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">import</span><span class="p">(</span><span class="dl">"</span><span class="s2">./awesome</span><span class="dl">"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// awesome.js</span>
<span class="k">import</span> <span class="nx">ConfettiGenerator</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">confetti-js</span><span class="dl">"</span>
<span class="kd">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">my-canvas</span><span class="dl">"</span><span class="p">)</span>
<span class="kd">const</span> <span class="nx">settings</span> <span class="o">=</span> <span class="p">{</span> <span class="na">target</span><span class="p">:</span> <span class="nx">element</span> <span class="p">}</span>
<span class="kd">const</span> <span class="nx">confetti</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ConfettiGenerator</span><span class="p">(</span><span class="nx">settings</span><span class="p">)</span>
<span class="nx">confetti</span><span class="p">.</span><span class="nx">render</span><span class="p">()</span>
</code></pre></div></div>

<p>‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ <code class="highlighter-rouge">Rollup</code> ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏°‡∏±‡∏î‡∏£‡∏ß‡∏°‡πÑ‡∏ü‡∏•‡πå ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÑ‡∏î‡πâ‡πÑ‡∏ü‡∏•‡πå‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô 2 ‡πÑ‡∏ü‡∏•‡πå‡∏Ñ‡∏∑‡∏≠</p>
<ol>
  <li>
    <p>application.js ‡πÇ‡∏î‡∏¢ <code class="highlighter-rouge">Rollup</code> ‡∏à‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£ import ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢‡πÇ‡∏î‡∏¢‡∏°‡∏µ hash ‡∏ï‡∏¥‡∏î‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢</p>

    <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">// application.js</span>
 <span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">showAwesomeThing</span> <span class="p">()</span> <span class="p">{</span>
   <span class="k">import</span><span class="p">(</span><span class="dl">"</span><span class="s2">./awesome-2febdb23</span><span class="dl">"</span><span class="p">)</span>
 <span class="p">}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>awesome-2febdb23.js ‡∏ã‡∏∂‡πà‡∏á‡∏à‡∏∞‡∏°‡∏µ hash ‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏î‡πâ‡∏ß‡∏¢</p>
  </li>
</ol>

<p>‡πÅ‡∏•‡∏∞‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏Å‡∏£‡∏¥‡πà‡∏ô‡πÑ‡∏ß‡πâ‡∏Ç‡πâ‡∏≤‡∏á‡∏ï‡πâ‡∏ô‡∏ß‡πà‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏à‡∏∞ compile ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏ö‡∏ô‡πÇ‡∏õ‡∏£‡∏î‡∏±‡∏Å‡∏ä‡∏±‡∏ô‡∏à‡∏£‡∏¥‡∏á <code class="highlighter-rouge">Sprockets</code> ‡∏Å‡πá‡∏à‡∏∞‡πÉ‡∏™‡πà fingerprint ‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÑ‡∏ü‡∏•‡πå <code class="highlighter-rouge">awesome</code> ‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô <code class="highlighter-rouge">awesome-2febdb23-aca9a2f0c2f4e33486f15c94e3b7901a05e59f7f4f368df17f4adfa3608d3dde.js</code> ‡πÅ‡∏ï‡πà‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå <code class="highlighter-rouge">application</code> ‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å <code class="highlighter-rouge">import("./awesome-2febdb23")</code> ‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</p>

<p>‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ô‡πÄ‡∏à‡∏≠‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ô‡∏µ‡πâ‡πÄ‡∏ä‡πà‡∏ô‡∏Å‡∏±‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ <code class="highlighter-rouge">Sprocket</code> ‡∏à‡∏∂‡∏á‡πÑ‡∏î‡πâ‡∏°‡∏µ‡∏Ñ‡∏ô pull request ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ <code class="highlighter-rouge">Sprockets</code> ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏ô‡πÉ‡∏à‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏°‡∏µ fingerprint ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß<a href="https://github.com/rails/sprockets/pull/714">‡∏ï‡∏≤‡∏°‡∏ô‡∏µ‡πâ</a> ‡πÅ‡∏ï‡πà fingerprint ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡∏±‡πâ‡∏ô‡∏Å‡πá‡∏Ñ‡∏∑‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏´‡∏±‡∏™ SHA256 ‡∏ñ‡∏∂‡∏á‡πÅ‡∏°‡πâ‡∏ß‡πà‡∏≤ <code class="highlighter-rouge">Rollup</code> ‡∏à‡∏∞‡πÉ‡∏ä‡πâ ‚ÄãSHA256 ‡πÄ‡∏ä‡πà‡∏ô‡∏Å‡∏±‡∏ô ‡πÅ‡∏ï‡πà‡∏à‡∏∞‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏≠‡∏≤‡πÅ‡∏Ñ‡πà 8 ‡∏ï‡∏±‡∏ß‡πÅ‡∏£‡∏Å‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡∏ó‡∏≥‡πÉ‡∏´‡πâ <code class="highlighter-rouge">Sprockets</code> ‡∏°‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà fingerprint ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</p>

<p>‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏≤‡∏ó‡∏≤‡∏á‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡∏Ñ‡∏∑‡∏≠ ‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ‡πÉ‡∏´‡πâ <code class="highlighter-rouge">Rollup</code> ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå chunk ‡∏ó‡∏µ‡πà‡∏°‡∏µ hash ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡πÇ‡∏î‡∏¢‡∏ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏î‡∏π‡∏ó‡∏µ‡πà‡πÇ‡∏Ñ‡πâ‡∏î‡∏à‡∏∞‡∏û‡∏ö‡∏ß‡πà‡∏≤‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á<a href="https://github.com/rollup/rollup/blob/master/src/Chunk.ts#L880">‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á chunk</a> ‡∏à‡∏∞‡∏°‡∏µ‡πÇ‡∏Ñ‡πâ‡∏î substr ‡∏≠‡∏¢‡∏π‡πà‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏≠‡∏á ‡πÄ‡∏£‡∏≤‡∏Å‡πá‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏Ñ‡πâ‡∏î‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏Å‡πá‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏° option ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£ build ‡∏ã‡∏∂‡πà‡∏á‡∏ú‡∏°‡∏Å‡πá‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏° option ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏±‡∏ô‡∏ô‡πà‡∏≤‡∏à‡∏∞‡∏¢‡∏∑‡∏î‡∏´‡∏¢‡∏∏‡πà‡∏ô‡∏Å‡∏ß‡πà‡∏≤<a href="https://github.com/karn18/rollup">‡∏ï‡∏≤‡∏°‡∏ô‡∏µ‡πâ</a>
‡πÇ‡∏î‡∏¢‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏ó‡∏≥‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏Å‡πá‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏° option ‡∏ó‡∏µ‡πà‡∏ä‡∏∑‡πà‡∏≠ <code class="highlighter-rouge">chunkHashLength</code> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏Ç‡∏≠‡∏á hash ‡∏ó‡∏µ‡πà‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡∏°‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå chunk</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">resolve</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@rollup/plugin-node-resolve</span><span class="dl">"</span>
<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="na">input</span><span class="p">:</span> <span class="p">[</span> <span class="dl">"</span><span class="s2">src/main.js</span><span class="dl">"</span> <span class="p">],</span>
  <span class="na">output</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">dir</span><span class="p">:</span> <span class="dl">"</span><span class="s2">dist</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">format</span><span class="p">:</span> <span class="dl">"</span><span class="s2">es</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">chunkFileNames</span><span class="p">:</span> <span class="dl">'</span><span class="s1">[name].[hash].js</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">chunkHashLength</span><span class="p">:</span> <span class="mi">64</span>
  <span class="p">},</span>
  <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">resolve</span><span class="p">()</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<p>‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏≤‡∏Å‡πá‡πÉ‡∏ä‡πâ <code class="highlighter-rouge">Rollup</code> ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° option ‡πÅ‡∏•‡∏∞‡∏Å‡πá‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ <code class="highlighter-rouge">assets:precompile</code> ‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÅ‡∏ö‡∏ö‡πÇ‡∏õ‡∏£‡∏î‡∏±‡∏Å‡∏ä‡∏±‡∏ô‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢</p>

<p><img src="/images/posts/2021/rails-rollup-dynamic-import/web-production.png" alt="web-production" width="800px" />
<em>dynamic import with Rollup</em></p>

<p>‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ workaround ‡∏ô‡∏µ‡πâ‡∏Å‡πá‡∏ô‡πà‡∏≤‡∏à‡∏∞‡∏ï‡∏≠‡∏ö‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÉ‡∏ä‡πâ dynamic import ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏û‡∏∂‡πà‡∏á <code class="highlighter-rouge">Webpack</code> ‡∏≠‡∏µ‡∏Å‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏≠‡∏∞‡πÑ‡∏£‡∏î‡∏µ‡πÜ ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ñ‡∏≠‡∏î <code class="highlighter-rouge">Webpack</code> ‡∏≠‡∏≠‡∏Å‡∏à‡∏∞‡πÄ‡∏≠‡∏≤‡∏°‡∏≤‡πÄ‡∏•‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏ü‡∏±‡∏á‡∏Å‡∏±‡∏ô‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö Bye üëã</p>

<h2 id="references">References</h2>
<ul>
  <li><a href="https://github.com/rails/jsbundling-rails">jsbundling</a></li>
  <li><a href="https://rollupjs.org/">Rollup</a></li>
  <li><a href="https://github.com/rails/sprockets/">Sprockets</a></li>
  <li><a href="https://github.com/karn18/rollup">Rollup ‡∏ó‡∏µ‡πà fork ‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° option</a></li>
</ul>

</main>

    </main>
  </body>
</html>
